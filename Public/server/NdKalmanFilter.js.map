{"version":3,"sources":["../../src/server/NdKalmanFilter.es6"],"names":["NdKalmanFilter","dimensions","cest","ones","mea","kg","eest","emea","m","eestPlusEmea","add","dotDivide","meaMinusPest","subtract","pest","kgTimesMea","dotMultiply","emeaPlusEest","emeaTimesEest","valueOf"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,c;AAEjB,4BAAYC,UAAZ,EAAgC;AAAA;;AAC5B,aAAKC,IAAL,GAAY,iBAAKC,IAAL,CAAUF,UAAV,CAAZ;AACA,aAAKG,GAAL,GAAW,IAAX;AACA,aAAKC,EAAL,GAAU,IAAV;AACA,aAAKC,IAAL,GAAY,iBAAKH,IAAL,CAAUF,UAAV,CAAZ;AACA,aAAKM,IAAL,GAAY,iBAAKJ,IAAL,CAAUF,UAAV,CAAZ;AACH;;;;kCAESO,C,EAAU;AAChB,iBAAKJ,GAAL,GAAWI,CAAX;AACA,gBAAIC,eAAe,iBAAKC,GAAL,CAAS,KAAKJ,IAAd,EAAoB,KAAKC,IAAzB,CAAnB;AACA,iBAAKF,EAAL,GAAU,iBAAKM,SAAL,CAAe,KAAKL,IAApB,EAA0BG,YAA1B,CAAV;;AAEA,gBAAIG,eAAe,iBAAKC,QAAL,CAAc,KAAKT,GAAnB,EAAwB,KAAKU,IAA7B,CAAnB;AACA,gBAAIC,aAAa,iBAAKC,WAAL,CAAiB,KAAKX,EAAtB,EAA0BO,YAA1B,CAAjB;AACA,iBAAKV,IAAL,GAAY,iBAAKQ,GAAL,CAAS,KAAKI,IAAd,EAAoBC,UAApB,CAAZ;AACA,iBAAKD,IAAL,GAAY,KAAKZ,IAAjB;;AAEA,gBAAIe,eAAe,iBAAKP,GAAL,CAAS,KAAKH,IAAd,EAAoB,KAAKD,IAAzB,CAAnB;AACA,gBAAIY,gBAAgB,iBAAKF,WAAL,CAAiB,KAAKT,IAAtB,EAA4B,KAAKD,IAAjC,CAApB;AACA,iBAAKA,IAAL,GAAY,iBAAKK,SAAL,CAAeO,aAAf,EAA8BD,YAA9B,CAAZ;;AAEA,mBAAO,KAAKf,IAAL,CAAUiB,OAAV,EAAP;AACH;;;;;;kBAzBgBnB,c","file":"NdKalmanFilter.js","sourcesContent":["import math from 'mathjs';\n\nexport default class NdKalmanFilter {\n\n    constructor(dimensions: Number) {\n        this.cest = math.ones(dimensions);\n        this.mea = null;\n        this.kg = null;\n        this.eest = math.ones(dimensions);\n        this.emea = math.ones(dimensions);\n    }\n\n    addSample(m: Array) {\n        this.mea = m;\n        let eestPlusEmea = math.add(this.eest, this.emea);\n        this.kg = math.dotDivide(this.eest, eestPlusEmea);\n\n        let meaMinusPest = math.subtract(this.mea, this.pest);\n        let kgTimesMea = math.dotMultiply(this.kg, meaMinusPest);\n        this.cest = math.add(this.pest, kgTimesMea);\n        this.pest = this.cest;\n\n        let emeaPlusEest = math.add(this.emea, this.eest);\n        let emeaTimesEest = math.dotMultiply(this.emea, this.eest);\n        this.eest = math.dotDivide(emeaTimesEest, emeaPlusEest);\n\n        return this.cest.valueOf();\n    }\n}"]}